function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function getPercentageOfKey(t,e){var i=100*e[t]/maxHelper[t];return i}function getRandomColor(){for(var t="0123456789ABCDEF".split(""),e="#",i=0;6>i;i++)e+=t[Math.floor(16*Math.random())];return e}function getCookie(t){for(var e=t+"=",i=document.cookie.split(";"),a=0;a<i.length;a++){for(var n=i[a];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return!1}function animateMapIntro(t){var e=document.getElementById("map"),i=new TWEEN.Tween({scale:2}).to({scale:1},4400).onUpdate(function(){e.style.transform="scale("+this.scale+")"}).onComplete(function(){document.cookie="visited=true",t()}).easing(TWEEN.Easing.Cubic.InOut).start()}function formatData(t){var e={};for(key in t[0])"name"!==key&&(e[key]={});t.forEach(function(t,i){normalizeData(t);for(key in t)"name"!==key&&("undefined"==typeof e[key][t.name]&&(e[key][t.name]={}),e[key][t.name]=t[key])}),buildDataViz(e)}function normalizeData(t){var e={},i=[];for(key in t)"name"!==key&&i.push(t[key]);var a=Math.max.apply(Math,i);for(key in t)maxHelper[t.name]=a}function buildCircle(t,e){var i=document.createElement("div");t.setAttribute("name",e.key),console.log(visualisationData,[e.key]),e.radius>=minRadius?i.radius=maxRadius*e.radius/100:i.radius=maxRadius*minRadius/100,i.msg=e.msg,console.log(e),t.appendChild(i),i.classList.add("bubbles");var a="background-image:url(assets/ico/"+capitalizeFirstLetter(e.name)+".svg);",n="left:"+.1*e.x+"%;",s="top:"+.1*e.y+"%;";return i.setAttribute("style","width:"+i.radius+"px;height:"+i.radius+"px;"+s+n+a),i.setAttribute("name",e.name),i.setAttribute("id","bubble"+e.name),i.addEventListener("mouseenter",getSetDataInfo),i.addEventListener("click",getSetDataInfo),i}function getSetDataInfo(t){console.log(this.msg),countrieInfo.innerHTML='<h2 style="color:'+this.msg.farbe+';">'+this.msg.anzeigename+"</h2><h3>"+outputMinimum(this.msg[statistikKey])+"</h3>"}function outputMinimum(t){return-1!=t?t:"-"}function buildDataViz(t){var e="http://www.w3.org/2000/svg",i=1200,a=1200,n={x:0,y:0},s=document.createElement("div");s.width=window.innerWidth,s.height=window.innerHeight,s.classList.add("holder"),s.style.display="block",statistikPlayground.appendChild(s);var o={};for(key in t)"name"!==key&&(console.log(t[key].x,t[key].y),o={key:statistikKey,x:t[key].x+n.x,y:t[key].y+n.y,radius:getPercentageOfKey(statistikKey,t[key]),name:key,msg:t[key]},t[key].circle=buildCircle(s,o));visualisationData=t}function changeKey(t){if(t!==statistikKey)for(key in visualisationData)if("name"!==key){var e=visualisationData[key].circle.radius,i=getPercentageOfKey(t,visualisationData[key]);animateValues(e,i,visualisationData[key].circle),visualisationData[key].circle.radius=i,statistikKey=t,"nationen"!=statistikKey?infoBox.dataset.currentfilter=statistikKey:infoBox.dataset.currentfilter=""}}function actionButton(t){changeKey(this.id)}function animateValues(t,e,i){var a={wert:t},n={wert:e},s=new TWEEN.Tween(a).to(n,1e3).onUpdate(function(){console.log(this.wert),this.wert>=minRadius?(i.style.width=maxRadius*this.wert/100+"px",i.style.height=maxRadius*this.wert/100+"px",i.classList.remove("minimum")):(i.style.width=maxRadius*minRadius/100+"px",i.style.height=maxRadius*minRadius/100+"px",i.classList.add("minimum"))}).easing(TWEEN.Easing.Quadratic.InOut).start()}function animate(t){requestAnimationFrame(animate),TWEEN.update(t)}var visitedCookie=getCookie("visited");console.log(visitedCookie),visitedCookie?(document.body.classList.add("no-animation"),setTimeout(function(){document.body.classList.add("animationFinish")},400)):animateMapIntro(function(){document.body.classList.add("animationFinish")});var statistikKey="nationen",maxHelper={},maxRadius=148,minRadius=10,visualisationData={},infoBox=document.getElementById("infoBox"),countrieInfo=document.getElementById("countrieInfo"),logo=document.getElementById("nationen"),statistikPlayground=document.getElementById("statistikPlayground"),options=["tore","gegentore","spielanzahl","alter","rotekarten","gelbekarten","qualifikationen","marktwert","kader","punkte","siege","gastgeber","twitter","nationen"],xmlhttp=new XMLHttpRequest,url="assets/data/data.json";xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var t=JSON.parse(xmlhttp.responseText);formatData(t[0])}},xmlhttp.open("GET",url,!0),xmlhttp.send();for(var inputFields=document.getElementsByClassName("filter"),i=0;i<inputFields.length;i++)inputFields[i].addEventListener("click",actionButton);logo.addEventListener("click",actionButton),requestAnimationFrame(animate);