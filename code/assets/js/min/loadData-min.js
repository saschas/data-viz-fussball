function capitalizeFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function helperFunction(e){function t(){for(var e=[],t=0;t<i.length;t++)console.log(i[t]),e.push({name:i[t].id,x:i[t].style.left,y:i[t].style.top,radius:i[t].style.width});console.save(e)}!function(e){e.save=function(t,a){if(!t)return void e.error("Console.save: No data");a||(a="console.json"),"object"==typeof t&&(t=JSON.stringify(t,void 0,4));var n=new Blob([t],{type:"text/json"}),i=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=a,o.href=window.URL.createObjectURL(n),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(i)}}(console);var a={x:0,y:0,active:!1,scale:{x:0,diff:0,bool:!1}},n=document.getElementById("getInfo"),i=e.getElementsByClassName("bubbles");console.log(e,e.getElementsByTagName("circle")),n.addEventListener("click",function(){t()}),window.addEventListener("keydown",function(e){e.altKey&&(console.log("The ALT key was pressed!"),a.scale.bool=!0)}),window.addEventListener("keyup",function(e){a.scale.bool=!1,a.activeEl=null}),window.addEventListener("mousedown",function(e){e.target.classList.contains("bubbles")&&(a.activeEl=e.target,a.scale.bool?(a.active=!1,a.scale.x=e.pageX,a.scale.y=e.pageY):a.active=!0)}),window.addEventListener("mousemove",function(e){a.x=e.pageX,a.y=e.pageY,a.scale.bool&&(a.scale.diff=e.pageX-a.scale.x,a.activeEl.style.width=a.scale.diff+"%"),a.active&&(a.activeEl.style.top=a.x+"%",a.activeEl.style.left=a.y+"%")}),window.addEventListener("mouseup",function(e){a.active=!1,a.activeEl=null})}function formatData(e){var t={};for(key in e[0])"name"!==key&&(t[key]={});e.forEach(function(e,a){normalizeData(e);for(key in e)"name"!==key&&("undefined"==typeof t[key][e.name]&&(t[key][e.name]={}),t[key][e.name]=e[key])}),buildDataViz(t)}function normalizeData(e){var t={},a=[];for(key in e)"name"!==key&&a.push(e[key]);var n=Math.max.apply(Math,a);for(key in e)maxHelper[e.name]=n}function buildCircle(e,t){var a=document.createElement("div");e.setAttribute("name",t.key),console.log(visualisationData,[t.key]),t.radius>=minRadius?a.radius=maxRadius*t.radius/100:a.radius=maxRadius*minRadius/100,a.msg=t.msg,e.appendChild(a),a.classList.add("bubbles"),console.log(t.x);var n="background-image:url(assets/ico/"+capitalizeFirstLetter(t.name)+".svg);";return a.setAttribute("style","position:absolute;left:"+.1*t.x+"%;top:"+.1*t.y+"%;"+n+"transform: translateX(-50%) translateY(-50%); width:"+a.radius+"px;height:"+a.radius+"px;"),a.setAttribute("name",t.name),a}function getPercentageOfKey(e,t){var a=100*t[e]/maxHelper[e];return a}function buildDataViz(e){var t="http://www.w3.org/2000/svg",a=1200,n=1200,i={x:66,y:0},o=document.createElement("div");o.width=window.innerWidth,o.height=window.innerHeight,o.classList.add("holder"),o.style.display="block",statistikPlayground.appendChild(o);var s={};for(key in e)"name"!==key&&(console.log(e[key].x,e[key].y),s={key:statistikKey,x:e[key].x+i.x,y:e[key].y+i.y,radius:getPercentageOfKey(statistikKey,e[key]),name:key,msg:"hallo ",color:getRandomColor()},e[key].circle=buildCircle(o,s));helperFunction(o),visualisationData=e}function getRandomColor(){for(var e="0123456789ABCDEF".split(""),t="#",a=0;6>a;a++)t+=e[Math.floor(16*Math.random())];return t}function changeKey(e){if(e!==statistikKey)for(key in visualisationData)if("name"!==key){var t=visualisationData[key].circle.radius,a=getPercentageOfKey(e,visualisationData[key]);animateValues(t,a,visualisationData[key].circle),visualisationData[key].circle.radius=a,statistikKey=e}}function actionButton(e){changeKey(this.name)}function animateValues(e,t,a){var n={wert:e},i={wert:t},o=new TWEEN.Tween(n).to(i,1e3).onUpdate(function(){console.log(this.wert),this.wert>=minRadius?(a.style.width=maxRadius*this.wert/100+"px",a.style.height=maxRadius*this.wert/100+"px"):(a.style.width=maxRadius*minRadius/100+"px",a.style.height=maxRadius*minRadius/100+"px")}).easing(TWEEN.Easing.Quadratic.InOut).start()}function animate(e){requestAnimationFrame(animate),TWEEN.update(e)}var statistikKey="tore",maxHelper={},maxRadius=148,minRadius=10,visualisationData={},statistikPlayground=document.getElementById("statistikPlayground"),options=["tore","gegentore","spielanzahl","alter","rot","gelb","qualifikationen","marktwert","kader","punkte","siege","gastgeber","twitter","landsize"],xmlhttp=new XMLHttpRequest,url="assets/data/data.json";xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var e=JSON.parse(xmlhttp.responseText);formatData(e[0])}},xmlhttp.open("GET",url,!0),xmlhttp.send();var buttonHolder=document.getElementById("options");options.forEach(function(e,t){var a=document.createElement("button");a.name=e,a.innerHTML=e,a.addEventListener("click",actionButton),buttonHolder.appendChild(a)}),requestAnimationFrame(animate),TweenMax.set("#map",{scale:2}),tl=new TimelineLite,tl.to("#map",4.4,{transformOrigin:"center center",scale:.8,ease:Sine.easeIn});