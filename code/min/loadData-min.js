function capitalizeFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}function getPercentageOfKey(t,e){var i=100*e[t]/maxHelper[t];return i}function getRandomColor(){for(var t="0123456789ABCDEF".split(""),e="#",i=0;6>i;i++)e+=t[Math.floor(16*Math.random())];return e}function getCookie(t){for(var e=t+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var a=i[n];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return!1}function animateMapIntro(t){var e=document.getElementById("map");new TWEEN.Tween({scale:2}).to({scale:1},4400).onUpdate(function(){e.style.transform="scale("+this.scale+")"}).onComplete(function(){document.cookie="visited=true",t()}).easing(TWEEN.Easing.Cubic.InOut).start()}function formatData(t){var e={};for(key in t[0])"name"!==key&&(e[key]={});t.forEach(function(t,i){normalizeData(t);for(key in t)"name"!==key&&("undefined"==typeof e[key][t.name]&&(e[key][t.name]={}),e[key][t.name]=t[key])}),buildDataViz(e)}function normalizeData(t){var e=[];for(key in t)"name"!==key&&e.push(t[key]);var i=Math.max.apply(Math,e);for(key in t)maxHelper[t.name]=i}function buildCircle(t,e){var i=document.createElement("div");t.setAttribute("name",e.key),console.log(visualisationData,[e.key]),e.radius>=minRadius?i.radius=maxRadius*e.radius/100:i.radius=maxRadius*minRadius/100,i.msg=e.msg,console.log(e),t.appendChild(i),i.classList.add("bubbles");var n="background-image:url(assets/ico/"+capitalizeFirstLetter(e.name)+".svg);",a="left:"+.1*e.x+"%;",s="top:"+.1*e.y+"%;";return i.setAttribute("style","width:"+i.radius+"px;height:"+i.radius+"px;"+s+a+n),i.setAttribute("name",e.name),i.setAttribute("id","bubble"+e.name),i.addEventListener("mouseenter",getSetDataInfo),i.addEventListener("click",getSetDataInfo),i}function getSetDataInfo(t){console.log(this.msg),countrieInfo.innerHTML='<h2 style="color:'+this.msg.farbe+';">'+this.msg.anzeigename+"</h2><h3>"+outputMinimum(this.msg[statistikKey])+"</h3>"}function outputMinimum(t){return-1!=t?t:"-"}function buildDataViz(t){var e={x:0,y:0},i=document.createElement("div");i.width=window.innerWidth,i.height=window.innerHeight,i.classList.add("holder"),i.style.display="block",statistikPlayground.appendChild(i);var n={};for(key in t)"name"!==key&&(console.log(t[key].x,t[key].y),n={key:statistikKey,x:t[key].x+e.x,y:t[key].y+e.y,radius:getPercentageOfKey(statistikKey,t[key]),name:key,msg:t[key]},t[key].circle=buildCircle(i,n));visualisationData=t}function changeKey(t){if(t!==statistikKey)for(key in visualisationData)if("name"!==key){var e=visualisationData[key].circle.radius,i=getPercentageOfKey(t,visualisationData[key]);animateValues(e,i,visualisationData[key].circle),visualisationData[key].circle.radius=i,statistikKey=t,"nationen"!=statistikKey?infoBox.dataset.currentfilter=statistikKey:infoBox.dataset.currentfilter=""}}function actionButton(t){changeKey(this.id)}function animateValues(t,e,i){var n={wert:t},a={wert:e};new TWEEN.Tween(n).to(a,1e3).onUpdate(function(){console.log(this.wert),this.wert>=minRadius?(i.style.width=maxRadius*this.wert/100+"px",i.style.height=maxRadius*this.wert/100+"px",i.classList.remove("minimum")):(i.style.width=maxRadius*minRadius/100+"px",i.style.height=maxRadius*minRadius/100+"px",i.classList.add("minimum"))}).easing(TWEEN.Easing.Quadratic.InOut).start()}function animate(t){requestAnimationFrame(animate),TWEEN.update(t)}var visitedCookie=getCookie("visited");console.log(visitedCookie),visitedCookie?(document.body.classList.add("no-animation"),setTimeout(function(){document.body.classList.add("animationFinish")},400)):animateMapIntro(function(){document.body.classList.add("animationFinish")});var statistikKey="nationen",maxHelper={},maxRadius=148,minRadius=10,visualisationData={},infoBox=document.getElementById("infoBox"),countrieInfo=document.getElementById("countrieInfo"),logo=document.getElementById("nationen"),statistikPlayground=document.getElementById("statistikPlayground"),options=["tore","gegentore","spielanzahl","alter","rotekarten","gelbekarten","qualifikationen","marktwert","kader","punkte","siege","gastgeber","twitter","nationen"],xmlhttp=new XMLHttpRequest,url="assets/data/data.json";xmlhttp.onreadystatechange=function(){if(4==xmlhttp.readyState&&200==xmlhttp.status){var t=JSON.parse(xmlhttp.responseText);formatData(t[0])}},xmlhttp.open("GET",url,!0),xmlhttp.send();for(var inputFields=document.getElementsByClassName("filter"),i=0;i<inputFields.length;i++)inputFields[i].addEventListener("click",actionButton);logo.addEventListener("click",actionButton),requestAnimationFrame(animate),$("#menu").click(function(){$("aside").removeClass("aside-menu"),$("#menu").fadeOut(0)});var mq=window.matchMedia("(max-width:800px)");mq.matches&&$(".row").click(function(){$("aside").addClass("aside-menu"),$(this).delay(1001).queue(function(){$("#menu").fadeIn(200),$(this).dequeue()})});
